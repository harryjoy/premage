(function(e){function f(e){this.message=e}function l(e){this.message=e}var t=["square","round","ellipse","square-round","leaf-left","leaf-right"];var n=["show-hide","slide","fade","bounce","blind","drop","explode","fold","puff","pulsate","shake","clip"];var r={name:"Premage",description:"jQuery plugin for having live preview of selected image from file browser (input[type=file]).",keywords:["file","live preview","image"],version:"1.0",author:{name:"Harsh Raval"},"created on":"11 Feb 2014",licenses:["MIT"],homepage:"https://github.com/harryjoy/premage",issues:"https://github.com/harryjoy/premage/issues",wiki:"https://github.com/harryjoy/premage/wiki",dependencies:["jquery","jquery-ui"]};jQuery.fn.extend({premage:function(e){if(typeof e==="object"||!e){var t=s(this);if(t){i(this);return o(this,e)}else{return r}}else{return r}}});var i=function(t){var n=e(t).attr("accept");if(n&&n!==undefined){}else{e(t).attr("accept","image/png, image/jpeg, image/jpg")}};var s=function(e){return e.is("input[type='file']")};var o=function(t,n){var r={width:false,height:false,default_image:"",image_container:{width:false,height:false,position:"right",shape:{type:"square-round",roundness:"5px"},background:"white"},animation:{enabled:false,type:"slide"},shape:{type:"square-round",roundness:"5px"},theme:"default"},n=e.extend(true,r,n);var i=new PreviewImageContainer(n.image_container,n.shape,n.width,n.height);var s=new PreviewImage(n,i);var o=e(t);i.get().append(s.get());i.setAnimator(new PreviewImageAnimator(n.animation));o.after(i.get());u(o,s);return this};PreviewImageContainer=function(t,n,r,i){this.previewImageContainer=undefined;this.options=t;this.animator=undefined;this.setOptions=function(){if(this.options.position){if(this.options.position==="left"){this.previewImageContainer.addClass("preview-image-left")}else if(this.options.position==="right"){this.previewImageContainer.addClass("preview-image-right")}}if(this.options.width){this.previewImageContainer.css("width",this.options.width)}var e=parseFloat(this.previewImageContainer.width());r=parseFloat(r);if(e<r){this.previewImageContainer.css("width",r)}if(this.options.height){this.previewImageContainer.css("height",this.options.height)}var t=parseFloat(this.previewImageContainer.height());i=parseFloat(i);if(t<i){this.previewImageContainer.css("height",i)}if(this.options.background){this.previewImageContainer.css("background",this.options.background)}h(this.previewImageContainer,this.options.shape,true,n)};this.draw=function(){this.previewImageContainer=e("<div></div>").addClass("preview-image-container");this.setOptions()};this.get=function(){if(this.previewImageContainer&&this.previewImageContainer!==undefined){}else{this.draw()}return this.previewImageContainer};this.getOptions=function(){return this.options};this.getAnimator=function(){return this.animator};this.setAnimator=function(e){this.animator=e};this.animate=function(e,t){if(e.enabled&&this.animator){this.animator.animate(this.previewImageContainer,false,t)}}};PreviewImage=function(t,n){this.previewImage=undefined;this.options=t;this.previewImageContainer=n;this.setOptions=function(){if(this.options.width){this.previewImage.css("width",this.options.width)}if(this.options.height){this.previewImage.css("height",this.options.height)}h(this.previewImage,this.options.shape,false)};this.draw=function(){this.previewImage=e("<img />").addClass("preview-image").attr("src",this.options.default_image).attr("id","img-live-preview-id");this.setOptions()};this.get=function(){if(this.previewImage&&this.previewImage!==undefined){}else{this.draw()}return this.previewImage};this.getOptions=function(){return this.options};this.update=function(e){if(this.options.animation.enabled){var t=this;this.animate(function(){t.previewImage.attr("src",e);t.animate()})}else{this.previewImage.attr("src",e)}};this.animate=function(e){if(this.options.animation.enabled){this.previewImageContainer.animate(this.options.animation,e)}}};PreviewImageAnimator=function(t){this.options=t;this.animate=function(e,n,r){if(!t.enabled){return}if(this.validateAnimationType()){this.run(e,r);if(n)this.run(e)}else{throw new l("Animation type not valid.")}};this.validateAnimationType=function(){return e.inArray(t.type,n)>-1};this.run=function(e,n){switch(t.type){case"show-hide":e.toggle(n);break;case"slide":e.slideToggle(n);break;case"fade":e.toggle("fade",n);break;case"bounce":e.toggle("bounce",{times:3},n);break;case"blind":e.toggle("blind",n);break;case"drop":e.toggle("drop",n);break;case"explode":e.toggle("explode",n);break;case"fold":e.toggle("fold",n);break;case"puff":e.toggle("puff",n);break;case"pulsate":e.toggle("pulsate",n);break;case"shake":e.toggle("shake",n);break;case"clip":e.toggle("clip",n);break}}};var u=function(e,t){e.on("change",function(){c(this,t)})};var a=function(n){var r=e.inArray(n.type,t)>-1;if(r){if(n.type==="square-round"){if(n.roundness&&n.roundness!=""){return true}else{return false}}return true}return false};var c=function(e,t){if(e.files&&e.files[0]){var n=new FileReader;n.onload=function(e){t.update(e.target.result)};n.readAsDataURL(e.files[0])}};var h=function(e,t,n,r){if(t.type&&t.type!==""){var i=a(t);if(!i){throw new f("Provided shape option is not proper.")}switch(t.type){case"square":e.addClass("preview-image-square");break;case"round":e.addClass("preview-image-round");break;case"ellipse":e.addClass("preview-image-ellipse");break;case"square-round":e.addClass("preview-image-square-round");e.css("border-radius",t.roundness);break;case"leaf-left":e.addClass("preview-image-leaf-left");break;case"leaf-right":e.addClass("preview-image-leaf-right");break}}else{if(n){h(e,r,false)}}}})(jQuery)